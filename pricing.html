<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tarifs - Post Foot</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/pricing.css">

  <!-- Supabase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>

  <!-- Background -->
  <div class="bg-gradient"></div>
  <div class="bg-grid"></div>
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>

  <!-- Content -->
  <div class="pricing-container content">

    <a href="selection.html" class="btn-back">‚Üê Retour</a>

    <!-- Header -->
    <div class="pricing-header">
      <h1 class="main-title">Choisissez votre offre</h1>
      <p class="subtitle">Creez des visuels professionnels pour votre club</p>
    </div>

    <!-- Toggle Mensuel/Annuel -->
    <div class="billing-toggle" id="billing-toggle">
      <span class="toggle-label" data-period="monthly">Mensuel</span>
      <label class="toggle-switch">
        <input type="checkbox" id="billingToggle">
        <span class="toggle-slider"></span>
      </label>
      <span class="toggle-label" data-period="yearly">
        Annuel
        <span class="save-badge">-17%</span>
      </span>
    </div>

    <!-- Pricing Cards -->
    <div class="pricing-grid">

      <!-- Gratuit -->
      <div class="pricing-card" id="card-free">
        <div class="card-header">
          <h2 class="plan-name">Gratuit</h2>
          <div class="plan-price">
            <span class="price">0</span>
            <span class="currency">EUR</span>
            <span class="period">pour toujours</span>
          </div>
        </div>
        <ul class="features-list">
          <li><span class="check">OK</span> Tous les templates disponibles</li>
          <li><span class="check">OK</span> Exports illimites</li>
          <li><span class="check">OK</span> Entree manuelle des clubs</li>
          <li class="disabled"><span class="x">X</span> Base de donnees pre-remplie</li>
          <li class="disabled"><span class="x">X</span> Visuel personnalise</li>
        </ul>
        <a href="index.html" class="btn-plan btn-free">Commencer gratuitement</a>
      </div>

      <!-- Base de donnees -->
      <div class="pricing-card popular" id="card-pro">
        <div class="popular-badge">Populaire</div>
        <div class="card-header">
          <h2 class="plan-name">Base de donnees</h2>
          <div class="plan-price">
            <span class="price" data-monthly="3,99" data-yearly="39,99">3,99</span>
            <span class="currency">EUR</span>
            <span class="period" data-monthly="/mois" data-yearly="/an">/mois</span>
          </div>
          <div class="yearly-note" style="display: none;">
            <span>soit 3,33EUR/mois</span>
          </div>
        </div>
        <ul class="features-list">
          <li><span class="check">OK</span> Tous les templates disponibles</li>
          <li><span class="check">OK</span> Exports illimites</li>
          <li><span class="check">OK</span> Base de donnees pre-remplie</li>
          <li><span class="check">OK</span> Logos, noms, abreviations inclus</li>
          <li class="disabled"><span class="x">X</span> Visuel personnalise</li>
        </ul>
        <a href="https://buy.stripe.com/14A6oJakyeXPdHd8SJ2VG03" class="btn-plan btn-pro" id="btn-pro" data-monthly="https://buy.stripe.com/14A6oJakyeXPdHd8SJ2VG03" data-yearly="https://buy.stripe.com/bJe6oJeAO3f7av11qh2VG04" target="_blank">S'abonner</a>
      </div>

      <!-- Premium -->
      <div class="pricing-card premium-card-style" id="card-premium">
        <div class="premium-badge">Premium</div>
        <div class="card-header">
          <h2 class="plan-name">Premium</h2>
          <div class="plan-price">
            <span class="price" data-monthly="9,99" data-yearly="99,99">9,99</span>
            <span class="currency">EUR</span>
            <span class="period" data-monthly="/mois" data-yearly="/an">/mois</span>
          </div>
          <div class="yearly-note" style="display: none;">
            <span>soit 8,33EUR/mois</span>
          </div>
        </div>
        <ul class="features-list">
          <li><span class="check">OK</span> Tous les templates disponibles</li>
          <li><span class="check">OK</span> Exports illimites</li>
          <li><span class="check">OK</span> Base de donnees incluse</li>
          <li><span class="check">OK</span> Visuel personnalise pour votre club</li>
          <li><span class="check">OK</span> Support prioritaire</li>
        </ul>
        <a href="https://buy.stripe.com/eVq5kF78m3f75aHc4V2VG01" class="btn-plan btn-premium" id="btn-premium" data-monthly="https://buy.stripe.com/eVq5kF78m3f75aHc4V2VG01" data-yearly="https://buy.stripe.com/6oUfZjcsG3f75aH8SJ2VG02" target="_blank">S'abonner</a>
      </div>

    </div>

    <!-- FAQ ou infos -->
    <div class="pricing-info">
      <p>Abonnement sans engagement - Annulez a tout moment</p>
    </div>

  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3>Post Foot</h3>
        <p>Creez des visuels post-match professionnels pour votre club de football. Partagez vos resultats sur les reseaux sociaux en quelques clics.</p>
      </div>
      <div class="footer-section">
        <h3>Contact</h3>
        <ul>
          <li>
            <a href="pricing.html" class="footer-link-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                <line x1="1" y1="10" x2="23" y2="10"/>
              </svg>
              Tarifs
            </a>
          </li>
          <li>
            <a href="mailto:mobyass.pdf@gmail.com" class="contact-link">
              <svg viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                <polyline points="22,6 12,13 2,6"/>
              </svg>
              Bug ou suggestions
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <span class="footer-version">v1.0</span>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="js/supabase-config.js"></script>
  <script src="js/auth.js"></script>
  <script>
    const billingToggleEl = document.getElementById('billing-toggle');
    const billingToggle = document.getElementById('billingToggle');
    const prices = document.querySelectorAll('.price[data-monthly]');
    const periods = document.querySelectorAll('.period[data-monthly]');
    const yearlyNotes = document.querySelectorAll('.yearly-note');
    const toggleLabels = document.querySelectorAll('.toggle-label');
    const btnPro = document.getElementById('btn-pro');
    const btnPremium = document.getElementById('btn-premium');
    const cardFree = document.getElementById('card-free');
    const cardPro = document.getElementById('card-pro');
    const cardPremium = document.getElementById('card-premium');
    const pricingInfo = document.querySelector('.pricing-info');

    // Verifier l'etat de connexion
    (async () => {
      const session = await getSession();
      const isGuest = estModeInvite();

      if (session) {
        // Utilisateur connecte : afficher seulement Pro et Premium
        cardFree.style.display = 'none';
        billingToggleEl.style.display = 'flex';
        pricingInfo.style.display = 'block';
      } else if (isGuest) {
        // Mode invite : afficher seulement Gratuit
        cardFree.style.display = 'block';
        cardPro.style.display = 'none';
        cardPremium.style.display = 'none';
        billingToggleEl.style.display = 'none';
        pricingInfo.innerHTML = '<p>Creez un compte pour acceder aux offres payantes</p>';
      } else {
        // Pas connecte, pas invite : afficher tout
        cardFree.style.display = 'block';
        cardPro.style.display = 'block';
        cardPremium.style.display = 'block';
      }
    })();

    billingToggle.addEventListener('change', () => {
      const isYearly = billingToggle.checked;

      // Mettre a jour les prix
      prices.forEach(price => {
        price.textContent = isYearly ? price.dataset.yearly : price.dataset.monthly;
      });

      // Mettre a jour les periodes
      periods.forEach(period => {
        period.textContent = isYearly ? period.dataset.yearly : period.dataset.monthly;
      });

      // Afficher/masquer les notes annuelles
      yearlyNotes.forEach(note => {
        note.style.display = isYearly ? 'block' : 'none';
      });

      // Mettre a jour les labels actifs
      toggleLabels.forEach(label => {
        if (label.dataset.period === 'yearly') {
          label.classList.toggle('active', isYearly);
        } else {
          label.classList.toggle('active', !isYearly);
        }
      });

      // Mettre a jour les liens Stripe
      if (btnPro) btnPro.href = isYearly ? btnPro.dataset.yearly : btnPro.dataset.monthly;
      if (btnPremium) btnPremium.href = isYearly ? btnPremium.dataset.yearly : btnPremium.dataset.monthly;
    });

    // Initialiser avec mensuel actif
    toggleLabels[0].classList.add('active');
  </script>

</body>
</html>
